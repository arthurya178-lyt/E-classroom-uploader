<html lang="zh-hant-tw">
<head>
    <meta charset="utf-8">
    <title>檔案上傳系統</title>
    <!-- CSS only -->
    <link href="/public/bootstrap-5.2.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- JavaScript Bundle with Popper -->
    <script src="/public/bootstrap-5.2.2/js/bootstrap.bundle.min.js"></script>
    <script src="/public/axios.min.js"></script>

    <link rel="stylesheet" href="/public/bootstrap-icons-1.9.1/bootstrap-icons.css">
</head>

<body>
<header>
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark ">
        <div class="container-fluid ">
            <a class="navbar-brand text-white fw-bolder" href="/"><i class="bi bi-book mx-2"></i>Education Helper</a>

        </div>

    </nav>
</header>
<div class="container mt-5">
    <div class="row d-flex justify-content-center">
        <div class="col-6 card shadow " style="height:fit-content;">
            <div class="container" style="margin-top: 50px;">
                <form id="loginPanel" onsubmit="sendData(event)">
                    <div class="mb-5 row d-flex justify-content-center">
                        <h1 class="col-sm-10 fw-bolder text-center">登入系統</h1>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-3 col-form-label">Account</label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="account" placeholder="email@example.com">
                        </div>
                    </div>
                    <div class="mb-4 row">
                        <label class="col-sm-3 col-form-label">Password</label>
                        <div class="col-sm-9">
                            <input type="password" id="password" class="form-control" >
                        </div>
                    </div>
                    <p class="text-danger" id="warning-msg"></p>
                    <div class="mb-5 row justify-content-center">
                        <button type="submit"  class="btn btn-outline-primary col-sm-3 mx-2">登入</button>
                        <button type="reset" class="btn btn-outline-warning col-sm-3 mx-2">清除</button>
                    </div>
                </form>
            </div>


        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
     aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel"></h5>
            </div>
            <div class="modal-body" id="modalBody">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
</body>

<script>
    function sendData(event)
    {
        event.preventDefault()
        const account = document.getElementById('account').value
        const password = document.getElementById('password').value

        const request = {uid:account,pid:password}
        axios.post('/api/login',request).then(response=>{
            //console.log(response.data)
            const svMsg = response.data
            if(svMsg.success){
                location.href = '/'
            }
            else{
                document.getElementById('warning-msg').innerText = svMsg.info
            }
        })
    }

    function modalAction(title, msg)
    {
        let modal = new bootstrap.Modal(document.getElementById('staticBackdrop'))
        let modalBody = document.getElementById('modalBody')
        let modalLabel = document.getElementById('staticBackdropLabel')
        modalBody.innerText = msg
        modalLabel.innerText = title
        modal.show()
    }
</script>
</html>